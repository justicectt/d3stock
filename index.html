<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Insert title here</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js"></script>
<script src="./js/basicdata.js"></script>
<style>

svg{border:1px solid black}
#content{
position:relative;
margin:auto
}

</style>
</head>
<body>
<div id="content" width="1000" height="1000">
  <svg width="1000" height="1000">
  </svg>
</div>

<script>


var nodes = stocknodes
var links = stocklinks
var simulation = d3.forceSimulation(nodes)
	.force('charge', d3.forceManyBody().strength(-30))
	.force('center', d3.forceCenter(400,400))
	.force('link', d3.forceLink().links(links).id(d => d.id).distance(0).strength(1))

const link =  d3.select('svg').append("g")
	.attr("stroke", "#999")
	.attr("stroke-opacity", 0.6)
	.selectAll("line")
	.data(links)
	.join("line");
	
const node = d3.select('svg').append("g")
	.attr("fill", function(d){
		if(d.nodetype == 'industry'){
			return "red"
		}else{
			return "#fff"
		}
		
	})
	.attr("stroke", "#000")
	.attr("stroke-width", 1.5)
	.selectAll("circle")
	.data(nodes)
	.join("circle")
	.attr("r", function(d){
		if(d.nodetype == 'industry'){
			return 5
		}else{
			return 3.5
		}
		
	})
	
simulation.on("tick", () => {
    link
        .attr("x1", d => d.source.x)
        .attr("y1", d => d.source.y)
        .attr("x2", d => d.target.x)
        .attr("y2", d => d.target.y);

    node
        .attr("cx", d => d.x)
        .attr("cy", d => d.y);
  });


</script>
</body>
</html>